<!Doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>WelcomeScreen</title>

    <!-- load stuff -->
    <script src="jspsych/jspsych.js"></script>
    <script src="jspsych/plugins/jspsych-html-button-response.js"></script>
    <script src="jspsych/plugins/jspsych-instructions.js"></script>
    <script src="jspsych/plugins/jspsych-image-keyboard-response.js"></script>
    <link href="jspsych/css/jspsych.css" rel="stylesheet">

</head>
<body></body>
<script>
    /*
    1. welcome
    2. instructions
    3. practice trials
    4. experimental trials
    5. debrief
     */

    // 1. welcome screen
    var welcome_block = {
        data: {
            screen_id: "html-button-response",
        },
        type: "html-button-response",
        stimulus: "welcome to the experiment!",
        choices: "Click here to continue"
    };

    // init timeline
    timeline = [];

    // 2. instructions
    var instructions_block = {
        data: {
            screen_id: "instructions"
        },
        type: "instructions",
        pages: [
            // page 1
            "<p>In this experiment a circle will appear in the middle of the screen.</p>" +
            "<p>If the colour of the circle is <b>blue</b> press <b>left</b> key. </p>" +
            "<p>If the colour of the circle is <b>orange</b> press the <b>right</b> key. </p>" +
            "<div style='float: left';> <img src='jspsych/examples/img/blue.png'/>" +
            "<p><b>Press the left key</b></p></div>" +
            "<div style='float: right';> <img src='jspsych/examples/img/orange.png'/>" +
            "<p><b>Press the right key<b></b></p></div>",

            // page 2
            "We will begin with some practice trials."
        ],
        show_clickable_nav: true
    };

    // set trials -- put all stimuli into an array and obtain the stimuli from that array
    var all_trial_stimuli = [
        {stimulus: "jspsych/examples/img/blue.png", data:{screen_id: "trial", correct_response: 37}},
        {stimulus: "jspsych/examples/img/orange.png", data:{screen_id: "trial", correct_response: 39}}
    ];

    // 3. set of practice trials
    /*
    var blue_trial = {
        type: 'image-keyboard-response',
        stimulus: "jspsych/examples/img/blue.png",
        choices: [37,39],
        trial_duration: null
    };

    var orange_trial = {
        type: 'image-keyboard-response',
        stimulus: "jspsych/examples/img/orange.png",
        choices: [37,39],
        trial_duration: null
    }; */

    // create the trial variable
    var trial = {
        data: jsPsych.timelineVariable("data"),
        type: 'image-keyboard-response',
        stimulus: jsPsych.timelineVariable("stimulus"),
        choices: [37,39],
        trial_duration: null,
        on_finish: function(data) {
            //define correct or incorrect (match coorect response with key_press)
            if (data.correct_response == data.key_press) {
                data.accuracy = 1
            } else {
                data.accuracy = 0
            }
        }
    };

    // create the order of stimulus presentation:
    var procedure = {
        timeline: [trial],
        timeline_variables: all_trial_stimuli
    };

    // push to timeline
    //timeline.push(welcome_block);
    //timeline.push(instructions_block);
    // timeline.push(blue_trial);
    // timeline.push(orange_trial);
    timeline.push(procedure)

    //start experiment
    jsPsych.init({
        timeline: timeline,
        on_finish: function() {
            jsPsych.data.displayData()
        }
    })

</script>
</html>